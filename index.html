<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: radial-gradient(circle, #0f0c29, #302b63, #24243e); color: white; text-align: center; font-family: 'Cairo', sans-serif; height: 100vh; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        .wheel-container { position: relative; width: 340px; height: 340px; border: 8px solid #ffd700; border-radius: 50%; box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); }
        #wheel { width: 100%; height: 100%; transition: transform 5s cubic-bezier(0.1, 0, 0.1, 1); }
        .pointer { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); width: 45px; z-index: 10; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.5)); }
        .spin-btn { margin-top: 40px; padding: 15px 50px; font-size: 20px; font-weight: bold; background: linear-gradient(45deg, #ffd700, #ffa500); border: none; border-radius: 30px; color: #000; cursor: pointer; box-shadow: 0 4px 15px rgba(255,215,0,0.3); transition: 0.2s; }
        .spin-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    </style>
</head>
<body>
    <h2 style="color: #ffd700; text-shadow: 0 0 10px rgba(255,215,0,0.5);">ğŸ¡ Ø¹Ø¬Ù„Ø© Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h2>
    <div class="wheel-container">
        <img src="https://cdn-icons-png.flaticon.com/512/8212/8212733.png" class="pointer">
        <canvas id="wheel" width="500" height="500"></canvas>
    </div>
    <button id="spinBtn" class="spin-btn">Ø¥Ø¶ØºØ· Ù„Ù„ØªØ¯ÙˆÙŠØ±</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const prizes = [
            {n: "Ø­Ø¸ Ø£ÙˆÙØ±", c: "#2c3e50", p: 80},
            {n: "10,000", c: "#27ae60", p: 10},
            {n: "50,000", c: "#2980b9", p: 9},
            {n: "100,000", c: "#8e44ad", p: 1},
            {n: "Ø­Ø¸ Ø£ÙˆÙØ±", c: "#34495e", p: 0}, // Ù„ÙØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ø¯Ù…Ø¬Ø© Ù…Ø¹ Ø§Ù„Ø­Ø¸ Ø§Ù„Ø£ÙˆÙØ±
            {n: "Ø­Ø¸ Ø£ÙˆÙØ±", c: "#2c3e50", p: 0}
        ];

        function draw() {
            const arc = (Math.PI * 2) / 6;
            prizes.forEach((p, i) => {
                ctx.beginPath();
                ctx.fillStyle = p.c;
                ctx.moveTo(250, 250);
                ctx.arc(250, 250, 250, i * arc, (i + 1) * arc);
                ctx.fill();
                ctx.save();
                ctx.translate(250, 250);
                ctx.rotate(i * arc + arc / 2);
                ctx.fillStyle = "white";
                ctx.font = "bold 22px Arial";
                ctx.fillText(p.n, 100, 10);
                ctx.restore();
            });
        }
        draw();

        document.getElementById('spinBtn').onclick = function() {
            this.disabled = true;
            // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
            let rand = Math.random() * 100;
            let winIndex = 0; // Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø­Ø¸ Ø£ÙˆÙØ±
            if (rand < 1) winIndex = 3; // 100,000
            else if (rand < 10) winIndex = 2; // 50,000
            else if (rand < 20) winIndex = 1; // 10,000
            else winIndex = 0; // Ø§Ù„Ø¨Ø§Ù‚ÙŠ 80%

            const stopDeg = (360 - (winIndex * 60)) + 1440; // 4 Ø¯ÙˆØ±Ø§Øª ÙƒØ§Ù…Ù„Ø©
            canvas.style.transform = `rotate(${stopDeg}deg)`;
            
            setTimeout(() => {
                tg.sendData(prizes[winIndex].n);
            }, 5500);
        };
    </script>
</body>
</html>
